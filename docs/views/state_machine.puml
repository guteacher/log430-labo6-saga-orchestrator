@startuml
1 : CREATING_ORDER
5 : CANCELLING_ORDER
2 : DECREASING_STOCK
4 : INCREASING_STOCK
3 : CREATING_PAYMENT

[*] --> 1
1 --> 2 : OrderCreated
2 --> 3 : StockDecreased
3 --> [*] : PaymentCreated

3 --> 4  : PaymentCreationFailed
4 --> 5 : StockIncreased
5 --> [*] : OrderCancelled

2 --> 5 : StockDecreaseFailed
1 --> [*] : OrderCreationFailed
@enduml